<html>
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no,user-scalable=no,maximum-scale=1">
    <title>Examples â€¢ Grabbing</title>
    <script src="../budo.js"></script>
    <script>
      AFRAME.registerComponent('leap-attachment', {
        init: function () {
          var el = this.el,
              parentEl = this.el.parentElement;
          el.body = parentEl.body;
          parentEl.addEventListener('body-loaded', function () { el.body = parentEl.body; });
          parentEl.addEventListener('gripup', function (e) { el.emit(e.type, e.detail, false); });
          parentEl.addEventListener('gripdown', function (e) { el.emit(e.type, e.detail, false); });
        },

        remove: function () {
          delete this.el.body;
        },

        tick: function () {
          var parentEl = this.el.parentElement,
              leapHand = parentEl.components['leap-hand'];
          if (!leapHand) return;
          this.el.setAttribute('position', leapHand.handMesh.fingerMeshes[2][5].position);
          this.el.setAttribute('quaternion', leapHand.handMesh.fingerMeshes[2][5].quaternion);
        }
      });
    </script>
  </head>
  <body>
    <a-scene>
      <!-- Player -->
      <a-entity camera="near: 0.01" position="0 0 0" look-controls>
        <a-entity leap-hand="hand: left; enablePhysics: true;">
          <a-sphere leap-attachment radius="0.1" color="red" opacity="0.1"
                    sphere-collider="objects: [dynamic-body]; radius: 0.1;"
                    grab></a-sphere>
        </a-entity>
        <a-entity leap-hand="hand: right; enablePhysics: true;">
          <a-sphere leap-attachment radius="0.1" color="red" opacity="0.1"
                    sphere-collider="objects: [dynamic-body]; radius: 0.1;"
                    grab></a-sphere>
        </a-entity>
      </a-entity>

      <a-box width="0.25" height="0.25" depth="0.25" position="-0.125 0.13 -0.5" color="red"
             holdable-DIS dynamic-body="shape: box"></a-box>
      <a-box width="0.25" height="0.25" depth="0.25" position="0.00 0.5 -0.5" color="green"
             holdable-DIS dynamic-body="shape: box"></a-box>
      <a-box width="0.25" height="0.25" depth="0.25" position="0.125 0.13 -0.5" color="blue"
             holdable-DIS dynamic-body="shape: box"></a-box>

      <!-- Terrain -->
      <a-grid static-body></a-grid>

      <!-- Lighting -->
      <a-light type="ambient" color="#ccc"></a-light>
      <a-light color="#ddf" distance="100" intensity="0.4" type="point"></a-light>
      <a-light color="#ddf" position="3 10 -10" distance="50" intensity="0.4" type="point"></a-light>
    </a-scene>
  </body>
</html>
